{"ast":null,"code":"var _jsxFileName = \"/Users/yoannlabbe/Projet/my-app/PLANT-FLOWER-FRONT/src/Profil/ModifyProfil.jsx\",\n    _s = $RefreshSig$();\n\n//Onglet du profil de l'utilisateur, ce dernier peut modifier ces informations.\nimport * as Yup from \"yup\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport ButtonFormik from \"../Common/ButtonFormik\";\nimport FormFormik from \"../Common/FormFormik\";\nimport FormField from '../Common/FormField';\nimport { useHistory } from \"react-router-dom\";\nimport UserContext from \"../Context/UserContext\";\nimport axios from \"axios\";\nimport { useCookies } from \"react-cookie\";\nimport { Container } from \"@material-ui/core\";\nimport { Button, makeStyles } from \"@material-ui/core\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  profile: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    margin: \"auto\",\n    marginBottom: \"70px\",\n    width: \"100%\"\n  },\n  button: {\n    borderRadius: \"25px\",\n    backgroundColor: \"#33FF93\",\n    color: \"black\",\n    width: \"100%\",\n    height: \"50px\",\n    marginLeft: \"50px\",\n    marginBottom: \"40px\"\n  }\n}));\nexport default function ModifyProfil(props) {\n  _s();\n\n  const [cookies, setCookies] = useCookies([\"token\"]);\n  const token = cookies.token;\n  const [user, setUser] = useState([]);\n  const [firstname, setFirstname] = useState(\"\");\n  const classes = useStyles();\n  const validationSchema = Yup.object().shape({\n    firstname: Yup.string(),\n    lastname: Yup.string(),\n    email: Yup.string(),\n    password: Yup.string(),\n    address: Yup.string(),\n    cp: Yup.string(),\n    country: Yup.string(),\n    phone: Yup.string()\n  });\n  const {\n    connectedUser,\n    setConnectedUser\n  } = useContext(UserContext);\n  const history = useHistory();\n  useEffect(async () => {\n    try {\n      const ads = await axios.get(`${process.env.REACT_APP_API_BASE_URL}create/find`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }, {\n        withCredentials: true\n      });\n\n      if (ads.data) {\n        console.log(ads.data);\n        setUser(ads.data.user);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }, []);\n\n  const handleSubmit = e => {\n    setFirstname(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.profile,\n    children: /*#__PURE__*/_jsxDEV(FormFormik, {\n      initialValues: {\n        firstname: user.firstname,\n        lastname: user.lastname,\n        email: user.email,\n        address: user.address,\n        cp: user.cp,\n        country: user.country,\n        phone: user.phone\n      } // pour modifier le profil\n      ,\n      validationSchema: validationSchema,\n      onSubmit: form => {\n        axios.patch(`${process.env.REACT_APP_API_BASE_URL}create/update`, form, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }, {\n          withCredentials: true\n        });\n        setUser(form);\n        history.push(\"/profil\");\n        window.location.reload();\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormField, {\n        name: \"firstname\",\n        placeholder: \"Pr\\xE9nom\",\n        type: \"text\",\n        variant: \"outlined\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormField, {\n        name: \"lastname\",\n        placeholder: \"Nom\",\n        type: \"text\",\n        variant: \"outlined\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormField, {\n        name: \"email\",\n        placeholder: \"Email\",\n        type: \"text\",\n        variant: \"outlined\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormField, {\n        name: \"address\",\n        placeholder: \"Adresse\",\n        type: \"text\",\n        variant: \"outlined\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormField, {\n        name: \"cp\",\n        placeholder: \"Code postal\",\n        type: \"text\",\n        variant: \"outlined\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormField, {\n        name: \"country\",\n        placeholder: \"Ville\",\n        type: \"text\",\n        variant: \"outlined\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormField, {\n        name: \"phone\",\n        placeholder: \"T\\xE9l\\xE9phone\",\n        type: \"text\",\n        variant: \"outlined\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ButtonFormik, {\n        className: classes.button,\n        title: \"Modifier mon profil\",\n        type: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: classes.button,\n        style: {\n          color: \"black\",\n          width: \"20%\",\n          height: \"70px\",\n          display: \"flex\",\n          alignItems: \"center\",\n          marginLeft: \"120%\",\n          borderRadius: \"25px\",\n          justifyContent: \"center\",\n          backgroundColor: \"#33FF93\",\n          marginBottom: \"60%\"\n        },\n        href: \"/modifyPass\",\n        children: \"Modifier son Mot de Passe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ModifyProfil, \"UpA2A7KCBsbZsgK+mn5UFwkEPDM=\", false, function () {\n  return [useCookies, useStyles, useHistory];\n});\n\n_c = ModifyProfil;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModifyProfil\");","map":{"version":3,"names":["Yup","React","useContext","useEffect","useState","ButtonFormik","FormFormik","FormField","useHistory","UserContext","axios","useCookies","Container","Button","makeStyles","useStyles","theme","profile","display","justifyContent","flexDirection","alignItems","margin","marginBottom","width","button","borderRadius","backgroundColor","color","height","marginLeft","ModifyProfil","props","cookies","setCookies","token","user","setUser","firstname","setFirstname","classes","validationSchema","object","shape","string","lastname","email","password","address","cp","country","phone","connectedUser","setConnectedUser","history","ads","get","process","env","REACT_APP_API_BASE_URL","headers","Authorization","withCredentials","data","console","log","error","handleSubmit","e","target","value","form","patch","push","window","location","reload"],"sources":["/Users/yoannlabbe/Projet/my-app/PLANT-FLOWER-FRONT/src/Profil/ModifyProfil.jsx"],"sourcesContent":["//Onglet du profil de l'utilisateur, ce dernier peut modifier ces informations.\r\n\r\nimport * as Yup from \"yup\";\r\n\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport ButtonFormik from \"../Common/ButtonFormik\";\r\nimport FormFormik from \"../Common/FormFormik\";\r\nimport FormField from '../Common/FormField';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport UserContext from \"../Context/UserContext\";\r\nimport axios from \"axios\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { Container } from \"@material-ui/core\";\r\nimport { Button, makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  profile: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    margin: \"auto\",\r\n    marginBottom: \"70px\",\r\n    width: \"100%\",\r\n  },\r\n  button: {\r\n    borderRadius: \"25px\",\r\n    backgroundColor: \"#33FF93\",\r\n    color: \"black\",\r\n    width: \"100%\",\r\n    height: \"50px\",\r\n    marginLeft: \"50px\",\r\n    marginBottom: \"40px\",\r\n\r\n  },\r\n}));\r\n\r\nexport default function ModifyProfil(props) {\r\n  const [cookies, setCookies] = useCookies([\"token\"]);\r\n  const token = cookies.token\r\n  const [user, setUser] = useState([]);\r\n  const [firstname, setFirstname] = useState(\"\")\r\n  const classes = useStyles();\r\n\r\n\r\n  const validationSchema = Yup.object().shape({\r\n    firstname: Yup.string(),\r\n    lastname: Yup.string(),\r\n    email: Yup.string(),\r\n    password: Yup.string(),\r\n    address: Yup.string(),\r\n    cp: Yup.string(),\r\n    country: Yup.string(),\r\n    phone: Yup.string(),\r\n  });\r\n\r\n  const { connectedUser, setConnectedUser } = useContext(UserContext);\r\n  const history = useHistory();\r\n\r\n  useEffect(async () => {\r\n    try {\r\n      const ads = await axios.get(`${process.env.REACT_APP_API_BASE_URL}create/find`, { headers: { Authorization: `Bearer ${token}` } }, {\r\n        withCredentials: true,\r\n      })\r\n      if (ads.data) {\r\n        console.log(ads.data)\r\n        setUser(ads.data.user)\r\n\r\n      }\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }, [])\r\n  const handleSubmit = (e) => {\r\n    setFirstname(e.target.value)\r\n  }\r\n  return (\r\n\r\n    <div className={classes.profile}>\r\n\r\n      <FormFormik\r\n        initialValues={{\r\n          firstname: user.firstname,\r\n          lastname: user.lastname,\r\n          email: user.email,\r\n          address: user.address,\r\n          cp: user.cp,\r\n          country: user.country,\r\n          phone: user.phone,\r\n\r\n        }}\r\n        // pour modifier le profil\r\n        validationSchema={validationSchema}\r\n        onSubmit={(form) => {\r\n          axios\r\n            .patch(\r\n              `${process.env.REACT_APP_API_BASE_URL}create/update`,\r\n              form, { headers: { Authorization: `Bearer ${token}` } },\r\n              {\r\n                withCredentials: true,\r\n              }\r\n            )\r\n\r\n          setUser(form);\r\n          history.push(\"/profil\")\r\n          window.location.reload()\r\n        }}\r\n      >\r\n        <br />\r\n        <br />\r\n\r\n        <FormField name=\"firstname\" placeholder=\"Prénom\" type=\"text\" variant=\"outlined\" />\r\n\r\n        <FormField name=\"lastname\" placeholder=\"Nom\" type=\"text\" variant=\"outlined\" />\r\n\r\n        <FormField name=\"email\" placeholder=\"Email\" type=\"text\" variant=\"outlined\" />\r\n\r\n        <FormField name=\"address\" placeholder=\"Adresse\" type=\"text\" variant=\"outlined\" />\r\n\r\n        <FormField name=\"cp\" placeholder=\"Code postal\" type=\"text\" variant=\"outlined\" />\r\n\r\n        <FormField name=\"country\" placeholder=\"Ville\" type=\"text\" variant=\"outlined\" />\r\n\r\n        <FormField name=\"phone\" placeholder=\"Téléphone\" type=\"text\" variant=\"outlined\" />\r\n\r\n        <ButtonFormik className={classes.button} title=\"Modifier mon profil\" type=\"submit\" />\r\n\r\n\r\n        <Button className={classes.button} style={{\r\n          color: \"black\",\r\n          width: \"20%\",\r\n          height: \"70px\",\r\n          display: \"flex\",\r\n\r\n          alignItems: \"center\",\r\n          marginLeft: \"120%\",\r\n          borderRadius: \"25px\",\r\n          justifyContent: \"center\",\r\n          backgroundColor: \"#33FF93\",\r\n          marginBottom: \"60%\"\r\n        }} href=\"/modifyPass\">Modifier son Mot de Passe</Button>\r\n\r\n\r\n\r\n      </FormFormik>\r\n\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}