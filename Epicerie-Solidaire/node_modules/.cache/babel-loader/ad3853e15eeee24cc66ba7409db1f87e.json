{"ast":null,"code":"var _jsxFileName = \"/Users/yoannlabbe/Projet/my-app/PLANT-FLOWER-FRONT/src/Password/PasswordReset.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport axios from \"axios\";\nimport ButtonFormik from \"../Common/ButtonFormik\";\nimport FormFormik from \"../Common/FormFormik\";\nimport ConnectField from \"../Connected/ConnectField\";\nimport { useParams } from \"react-router-dom\";\nimport * as Yup from \"yup\";\nimport { Button, makeStyles } from \"@material-ui/core\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  connect: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    margin: \"auto\",\n    marginTop: \"45px\"\n  },\n  click: {\n    marginTop: \"10px\",\n    marginBottom: \"15px\"\n  },\n  button: {\n    borderRadius: \"25px\",\n    backgroundColor: \"#33FF93\",\n    color: \"black\",\n    width: \"15%\",\n    height: \"50px\",\n    marginTop: \"10px\",\n    marginBottom: \"10px\"\n  }\n}));\nexport default function PasswordReset() {\n  _s();\n\n  const classes = useStyles();\n  const validationSchema = Yup.object().shape({\n    password: Yup.string().required(\"Veuillez saisir votre nouveau mot de passe\"),\n    passwordConfirm: Yup.string().required(\"Veuillez confirmer votre nouveau mot de passe\")\n  });\n  const {\n    user\n  } = useParams();\n  const [confirmPassword, setConfirmPassword] = useState(false);\n  const [erreur, setErreur] = useState(true); // fonction pour le nouveau mot de passe \n\n  const confirmation = async values => {\n    try {\n      const {\n        password,\n        passwordConfirm\n      } = values;\n\n      if (password === passwordConfirm) {\n        const email = await axios.post(`${process.env.REACT_APP_API_BASE_URL}create/resetpassword/${user}`, {\n          password\n        }, {\n          withCredentials: true\n        });\n\n        if (email.data) {\n          setConfirmPassword(true);\n        }\n      } else {\n        setErreur(false);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  if (confirmPassword == false && erreur == true) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(FormFormik, {\n        initialValues: {\n          password: \"\",\n          passwordConfirm: \"\"\n        },\n        validationSchema: validationSchema,\n        onSubmit: confirmation,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Confirmer votre nouveau mot de passe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ConnectField, {\n          name: \"password\",\n          type: \"password\",\n          placeholder: \"Mot de passe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ConnectField, {\n          name: \"passwordConfirm\",\n          type: \"password\",\n          placeholder: \"Confirmer le Mot de passe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ButtonFormik, {\n          title: \"envoyer\",\n          type: \"button\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this);\n  } else if (confirmPassword == true) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Votre mot de passe a \\xE9t\\xE9 modifier vous pouvez vous connecter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: classes.button,\n        href: \"/connexion\",\n        children: \"connexion\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this);\n  } else if (erreur == false) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(FormFormik, {\n        initialValues: {\n          password: \"\",\n          passwordConfirm: \"\"\n        },\n        validationSchema: validationSchema,\n        onSubmit: confirmation,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Confirmer votre nouveau mot de passe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"les mots de passe ne sont pas les m\\xEAmes veuiller recommencer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ConnectField, {\n          name: \"password\",\n          type: \"password\",\n          placeholder: \"Mot de passe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ConnectField, {\n          name: \"passwordConfirm\",\n          type: \"password\",\n          placeholder: \"Confirmer le Mot de passe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ButtonFormik, {\n          title: \"envoyer\",\n          type: \"button\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this);\n  }\n}\n\n_s(PasswordReset, \"86ZInqC5DZDr9ENnCGwG4o9FSkE=\", false, function () {\n  return [useStyles, useParams];\n});\n\n_c = PasswordReset;\n\nvar _c;\n\n$RefreshReg$(_c, \"PasswordReset\");","map":{"version":3,"sources":["/Users/yoannlabbe/Projet/my-app/PLANT-FLOWER-FRONT/src/Password/PasswordReset.jsx"],"names":["React","useState","axios","ButtonFormik","FormFormik","ConnectField","useParams","Yup","Button","makeStyles","useStyles","theme","connect","display","justifyContent","flexDirection","alignItems","margin","marginTop","click","marginBottom","button","borderRadius","backgroundColor","color","width","height","PasswordReset","classes","validationSchema","object","shape","password","string","required","passwordConfirm","user","confirmPassword","setConfirmPassword","erreur","setErreur","confirmation","values","email","post","process","env","REACT_APP_API_BASE_URL","withCredentials","data","error","console","log"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,wBAAzB;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,OAAOC,YAAP,MAAyB,2BAAzB;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AAEA,SAASC,MAAT,EAAiBC,UAAjB,QAAmC,mBAAnC;;AAEA,MAAMC,SAAS,GAAGD,UAAU,CAAEE,KAAD,KAAY;AACrCC,EAAAA,OAAO,EAAE;AACLC,IAAAA,OAAO,EAAE,MADJ;AAELC,IAAAA,cAAc,EAAE,QAFX;AAGLC,IAAAA,aAAa,EAAE,QAHV;AAILC,IAAAA,UAAU,EAAE,QAJP;AAKLC,IAAAA,MAAM,EAAE,MALH;AAMLC,IAAAA,SAAS,EAAE;AANN,GAD4B;AASrCC,EAAAA,KAAK,EAAE;AACHD,IAAAA,SAAS,EAAE,MADR;AAEHE,IAAAA,YAAY,EAAE;AAFX,GAT8B;AAarCC,EAAAA,MAAM,EAAE;AACJC,IAAAA,YAAY,EAAE,MADV;AAEJC,IAAAA,eAAe,EAAE,SAFb;AAGJC,IAAAA,KAAK,EAAE,OAHH;AAIJC,IAAAA,KAAK,EAAE,KAJH;AAKJC,IAAAA,MAAM,EAAE,MALJ;AAMJR,IAAAA,SAAS,EAAE,MANP;AAOJE,IAAAA,YAAY,EAAE;AAPV;AAb6B,CAAZ,CAAD,CAA5B;AAwBA,eAAe,SAASO,aAAT,GAAyB;AAAA;;AACpC,QAAMC,OAAO,GAAGlB,SAAS,EAAzB;AACA,QAAMmB,gBAAgB,GAAGtB,GAAG,CAACuB,MAAJ,GAAaC,KAAb,CAAmB;AAExCC,IAAAA,QAAQ,EAAEzB,GAAG,CAAC0B,MAAJ,GAAaC,QAAb,CAAsB,4CAAtB,CAF8B;AAGxCC,IAAAA,eAAe,EAAE5B,GAAG,CAAC0B,MAAJ,GAAaC,QAAb,CAAsB,+CAAtB;AAHuB,GAAnB,CAAzB;AAMA,QAAM;AAAEE,IAAAA;AAAF,MAAW9B,SAAS,EAA1B;AAEA,QAAM,CAAC+B,eAAD,EAAkBC,kBAAlB,IAAwCrC,QAAQ,CAAC,KAAD,CAAtD;AACA,QAAM,CAACsC,MAAD,EAASC,SAAT,IAAsBvC,QAAQ,CAAC,IAAD,CAApC,CAXoC,CAYxC;;AACI,QAAMwC,YAAY,GAAG,MAAOC,MAAP,IAAkB;AACnC,QAAI;AACA,YAAM;AAAEV,QAAAA,QAAF;AAAYG,QAAAA;AAAZ,UAAgCO,MAAtC;;AAEA,UAAIV,QAAQ,KAAKG,eAAjB,EAAkC;AAC9B,cAAMQ,KAAK,GAAG,MAAMzC,KAAK,CAAC0C,IAAN,CAAY,GAAEC,OAAO,CAACC,GAAR,CAAYC,sBAAuB,wBAAuBX,IAAK,EAA7E,EAAgF;AAAEJ,UAAAA;AAAF,SAAhF,EAA8F;AAC9GgB,UAAAA,eAAe,EAAE;AAD6F,SAA9F,CAApB;;AAGA,YAAIL,KAAK,CAACM,IAAV,EAAgB;AACZX,UAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACH;AACJ,OAPD,MAOO;AACHE,QAAAA,SAAS,CAAC,KAAD,CAAT;AACH;AAEJ,KAdD,CAcE,OAAOU,KAAP,EAAc;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH;AACJ,GAlBD;;AAoBA,MAAIb,eAAe,IAAI,KAAnB,IAA4BE,MAAM,IAAI,IAA1C,EAAgD;AAC5C,wBACI;AAAA,6BAEI,QAAC,UAAD;AACI,QAAA,aAAa,EAAE;AAEXP,UAAAA,QAAQ,EAAE,EAFC;AAGXG,UAAAA,eAAe,EAAE;AAHN,SADnB;AAOI,QAAA,gBAAgB,EAAEN,gBAPtB;AAQI,QAAA,QAAQ,EAAEY,YARd;AAAA,gCAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAVJ,eAWI,QAAC,YAAD;AAAc,UAAA,IAAI,EAAC,UAAnB;AAA8B,UAAA,IAAI,EAAC,UAAnC;AAA8C,UAAA,WAAW,EAAC;AAA1D;AAAA;AAAA;AAAA;AAAA,gBAXJ,eAYI,QAAC,YAAD;AAAc,UAAA,IAAI,EAAC,iBAAnB;AAAqC,UAAA,IAAI,EAAC,UAA1C;AAAqD,UAAA,WAAW,EAAC;AAAjE;AAAA;AAAA;AAAA;AAAA,gBAZJ,eAcI,QAAC,YAAD;AAAc,UAAA,KAAK,EAAC,SAApB;AAA8B,UAAA,IAAI,EAAC;AAAnC;AAAA;AAAA;AAAA;AAAA,gBAdJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,YADJ;AAsBH,GAvBD,MAuBO,IAAIJ,eAAe,IAAI,IAAvB,EAA6B;AAChC,wBACI;AAAA,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI,QAAC,MAAD;AAAQ,QAAA,SAAS,EAAET,OAAO,CAACP,MAA3B;AAAmC,QAAA,IAAI,EAAC,YAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAMH,GAPM,MAOA,IAAIkB,MAAM,IAAI,KAAd,EAAqB;AACxB,wBACI;AAAA,6BAEI,QAAC,UAAD;AACI,QAAA,aAAa,EAAE;AAEXP,UAAAA,QAAQ,EAAE,EAFC;AAGXG,UAAAA,eAAe,EAAE;AAHN,SADnB;AAOI,QAAA,gBAAgB,EAAEN,gBAPtB;AAQI,QAAA,QAAQ,EAAEY,YARd;AAAA,gCAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAVJ,eAWI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXJ,eAYI,QAAC,YAAD;AAAc,UAAA,IAAI,EAAC,UAAnB;AAA8B,UAAA,IAAI,EAAC,UAAnC;AAA8C,UAAA,WAAW,EAAC;AAA1D;AAAA;AAAA;AAAA;AAAA,gBAZJ,eAaI,QAAC,YAAD;AAAc,UAAA,IAAI,EAAC,iBAAnB;AAAqC,UAAA,IAAI,EAAC,UAA1C;AAAqD,UAAA,WAAW,EAAC;AAAjE;AAAA;AAAA;AAAA;AAAA,gBAbJ,eAeI,QAAC,YAAD;AAAc,UAAA,KAAK,EAAC,SAApB;AAA8B,UAAA,IAAI,EAAC;AAAnC;AAAA;AAAA;AAAA;AAAA,gBAfJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,YADJ;AAuBH;AACJ;;GAxFuBd,a;UACJjB,S,EAOCJ,S;;;KARGqB,a","sourcesContent":["import React, { useState } from 'react';\r\nimport axios from \"axios\";\r\nimport ButtonFormik from \"../Common/ButtonFormik\";\r\nimport FormFormik from \"../Common/FormFormik\";\r\nimport ConnectField from \"../Connected/ConnectField\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport * as Yup from \"yup\";\r\n\r\nimport { Button, makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    connect: {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        margin: \"auto\",\r\n        marginTop: \"45px\",\r\n    },\r\n    click: {\r\n        marginTop: \"10px\",\r\n        marginBottom: \"15px\",\r\n    },\r\n    button: {\r\n        borderRadius: \"25px\",\r\n        backgroundColor: \"#33FF93\",\r\n        color: \"black\",\r\n        width: \"15%\",\r\n        height: \"50px\",\r\n        marginTop: \"10px\",\r\n        marginBottom: \"10px\",\r\n    },\r\n}));\r\n\r\nexport default function PasswordReset() {\r\n    const classes = useStyles();\r\n    const validationSchema = Yup.object().shape({\r\n\r\n        password: Yup.string().required(\"Veuillez saisir votre nouveau mot de passe\"),\r\n        passwordConfirm: Yup.string().required(\"Veuillez confirmer votre nouveau mot de passe\"),\r\n\r\n    });\r\n    const { user } = useParams()\r\n\r\n    const [confirmPassword, setConfirmPassword] = useState(false)\r\n    const [erreur, setErreur] = useState(true)\r\n// fonction pour le nouveau mot de passe \r\n    const confirmation = async (values) => {\r\n        try {\r\n            const { password, passwordConfirm } = values\r\n\r\n            if (password === passwordConfirm) {\r\n                const email = await axios.post(`${process.env.REACT_APP_API_BASE_URL}create/resetpassword/${user}`, { password }, {\r\n                    withCredentials: true,\r\n                })\r\n                if (email.data) {\r\n                    setConfirmPassword(true)\r\n                }\r\n            } else {\r\n                setErreur(false)\r\n            }\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    if (confirmPassword == false && erreur == true) {\r\n        return (\r\n            <div>\r\n\r\n                <FormFormik\r\n                    initialValues={{\r\n\r\n                        password: \"\",\r\n                        passwordConfirm: \"\",\r\n                    }}\r\n\r\n                    validationSchema={validationSchema}\r\n                    onSubmit={confirmation}\r\n                >\r\n                    <h1>Confirmer votre nouveau mot de passe</h1>\r\n                    <ConnectField name=\"password\" type=\"password\" placeholder=\"Mot de passe\" />\r\n                    <ConnectField name=\"passwordConfirm\" type=\"password\" placeholder=\"Confirmer le Mot de passe\" />\r\n\r\n                    <ButtonFormik title=\"envoyer\" type=\"button\" />\r\n\r\n                </FormFormik>\r\n            </div>\r\n        )\r\n    } else if (confirmPassword == true) {\r\n        return (\r\n            <div>\r\n                <h1>Votre mot de passe a été modifier vous pouvez vous connecter</h1>\r\n                <Button className={classes.button} href=\"/connexion\">connexion</Button>\r\n            </div>\r\n        )\r\n    } else if (erreur == false) {\r\n        return (\r\n            <div>\r\n\r\n                <FormFormik\r\n                    initialValues={{\r\n\r\n                        password: \"\",\r\n                        passwordConfirm: \"\",\r\n                    }}\r\n\r\n                    validationSchema={validationSchema}\r\n                    onSubmit={confirmation}\r\n                >\r\n                    <h1>Confirmer votre nouveau mot de passe</h1>\r\n                    <h3>les mots de passe ne sont pas les mêmes veuiller recommencer</h3>\r\n                    <ConnectField name=\"password\" type=\"password\" placeholder=\"Mot de passe\" />\r\n                    <ConnectField name=\"passwordConfirm\" type=\"password\" placeholder=\"Confirmer le Mot de passe\" />\r\n\r\n                    <ButtonFormik title=\"envoyer\" type=\"button\" />\r\n\r\n                </FormFormik>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}